<!DOCTYPE html>
<html>

<head>
    <title>Observable properties pattern</title>
</head>

<body>
    <strong>Result</strong>
    <div id='result'>
    </div>
    <hr>
    <strong>Changed</strong>
    <div id="changed">
    </div>
</body>
<script type="text/javascript">
    function Book(name, price) {
        var changedDiv = document.getElementById('changed');

        Object.defineProperty(this, 'name', {
            get: function () {
                return name;
            },
            set: function (val) {
                name = val;
                changedDiv.innerHTML = 'The name is: ' + name + "<br />";
            }
        });

        Object.defineProperty(this, 'price', {
            get: function () {
                return price;
            },
            set: function (val) {
                price = val;
                if (price > 100) {
                    changedDiv.innerHTML += 'System error, price has gone unexpectedly high<br/>';
                } else {
                    changedDiv.innerHTML += 'The price is $' + price + "<br/>";
                }
            }
        });
    }

    (function () {
        var book = new Book('Java Script: The Good Parts', 23.99);
        var resultDiv = document.getElementById('result');
        resultDiv.innerHTML = 'The name is: ' + book.name + "<br />";
        resultDiv.innerHTML += 'The price is $ ' + book.price;
        book.price = "19.99";
        book.price = "200";
        book.price = "77";
    })();

</script>

</html>